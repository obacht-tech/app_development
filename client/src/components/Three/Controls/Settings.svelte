<script lang="ts">
    import RangeSlider from "svelte-range-slider-pips";
    import {modal} from "../../../store";
    import ControlsModal from "./ControlsModal.svelte";

    export let mask_wear: number = 10;
    export let distance: number = 10;
    export let incidence: number = 10;
    export let time_infection: number = 10;


    const showModal = (event) => {
        event.stopPropagation()
        if ($modal === '' || $modal === 'layers') {
            modal.set('settings');
        } else {
            modal.set('')
        }
    };

</script>

<style lang="sass">
    @import "./../../../styles/theme"

    .settings
        justify-self: center
        align-self: center
        display: flex
        justify-content: center
        align-items: center
        padding: .5rem
        width: 3rem

        &__modal
            padding: .5rem
            width: 100%

            p
                font-size: $size-normal
                line-height: $size-normal
                margin: 1.5rem 0 0.5rem 0

</style>

<div class="settings">
    <div class="settings__icon" on:click={showModal}>
        <i class="fas fa-cog"></i>
    </div>

    {#if $modal === 'settings'}
        <ControlsModal positionArrow="settings" on:close={()=>modal.set('')}>
            <div class="settings__modal">
                <p>Maskentragende: {mask_wear}%</p>
                <RangeSlider on:stop={(value) => mask_wear = value.detail.value} id="range_slider" range="min"
                             values={[50]}/>
                <p>Mindestabstand: {distance}m </p>
                <RangeSlider on:stop={(value) => distance = value.detail.value/10} min={0} max={50} id="range_slider"
                             range="min" values={[1]}/>
                <p>Inzidenz auf 100tsd: {incidence}</p>
                <RangeSlider on:stop={(value) => incidence = value.detail.value} min={0} max={1000} id="range_slider"
                             range="min" values={[50]}/>
                <p>Zeitlicher Kontakt zur Infektion: {time_infection}Sek.</p>
                <RangeSlider on:stop={(value) => time_infection = value.detail.value} min={0} max={300}
                             id="range_slider" range="min" values={[50]}/>
            </div>
        </ControlsModal>


    {/if}

</div>
